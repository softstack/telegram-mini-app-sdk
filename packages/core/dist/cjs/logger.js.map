{"version":3,"file":"logger.js","sourceRoot":"","sources":["../../src/logger.ts"],"names":[],"mappings":"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","sourcesContent":["import { Location, getLocationFromError } from 'get-current-line';\n\n/**\n * Represents the different levels of logging channels available.\n *\n * @typedef {('debug' | 'error' | 'info' | 'verbose' | 'warning')} LogChannel\n *\n * @property {'debug'} debug - Detailed information, typically of interest only when diagnosing problems.\n * @property {'error'} error - Error conditions.\n * @property {'info'} info - Informational messages that highlight the progress of the application at coarse-grained level.\n * @property {'verbose'} verbose - Detailed information on the flow through the system.\n * @property {'warning'} warning - Potentially harmful situations.\n */\nexport type LogChannel = 'debug' | 'error' | 'info' | 'verbose' | 'warning';\n\n/**\n * A logger class that provides methods to log messages to different channels.\n *\n * @template T - The type of log channels, defaults to `LogChannel`.\n */\nexport class Logger<T extends string = LogChannel> {\n\tconstructor(activeChannels: Array<LogChannel | T> = []) {\n\t\tfor (const channel of activeChannels) {\n\t\t\tthis.setChannelActive(channel, true);\n\t\t}\n\t}\n\n\t/**\n\t * A set that holds the active logging channels.\n\t *\n\t * @private\n\t */\n\tprivate _activeChannels = new Set<LogChannel | T>();\n\n\t/**\n\t * Sets the active state of a specified logging channel.\n\t *\n\t * @param channel - The logging channel to be activated or deactivated. It can be of type `LogChannel` or `T`.\n\t * @param active - A boolean indicating whether the channel should be active (`true`) or inactive (`false`).\n\t *\n\t * @returns void\n\t */\n\tsetChannelActive(channel: LogChannel | T, active: boolean): void {\n\t\tif (active) {\n\t\t\tthis._activeChannels.add(channel);\n\t\t} else {\n\t\t\tthis._activeChannels.delete(channel);\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the specified log channel is currently active.\n\t *\n\t * @param channel - The log channel to check. It can be of type `LogChannel` or `T`.\n\t * @returns `true` if the channel is active, otherwise `false`.\n\t */\n\tisChannelActive(channel: LogChannel | T): boolean {\n\t\treturn this._activeChannels.has(channel);\n\t}\n\n\t/**\n\t * Retrieves the currently active log channels.\n\t *\n\t * @template T - The type of additional log channels.\n\t * @returns {Array<LogChannel | T>} An array containing the active log channels.\n\t */\n\tgetActiveChannels(): Array<LogChannel | T> {\n\t\treturn [...this._activeChannels];\n\t}\n\n\t/**\n\t * Logs a message to the console if the specified log channel is active.\n\t *\n\t * @param logChannel - The channel to log the message to. Can be a `LogChannel` or a custom type `T`.\n\t * @param optionalParameters - Additional parameters to log.\n\t */\n\tlog(logChannel: LogChannel | T, ...optionalParameters: unknown[]): void {\n\t\tif (this.isChannelActive(logChannel)) {\n\t\t\tconst logPrefix = `${new Date().toISOString()} ${logChannel.toUpperCase()}`;\n\t\t\tif (logChannel === 'error') {\n\t\t\t\tconsole.error(logPrefix, ...optionalParameters);\n\t\t\t} else {\n\t\t\t\tconsole.log(logPrefix, ...optionalParameters);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Logs a debug message with the specified location and optional parameters.\n\t *\n\t * @param location - The location where the log is being generated.\n\t * @param message - The main message to log.\n\t * @param optionalParameters - Additional optional parameters to include in the log.\n\t * @returns void\n\t */\n\tlogDebug = (location: Location, message: unknown, ...optionalParameters: unknown[]): void => {\n\t\tthis.log('debug', `${this._getLocationString(location)}`, message, ...optionalParameters);\n\t};\n\n\t/**\n\t * Logs an error message with optional parameters and location information.\n\t *\n\t * @param location - The location where the error occurred.\n\t * @param error - The error object or message to be logged.\n\t * @param options - Optional parameters for additional logging details.\n\t * @param options.prefix - An optional prefix to be added to the log message.\n\t * @param options.key - An optional key to be added to the log message.\n\t * @param optionalParameters - Additional parameters to be logged.\n\t */\n\tlogError(\n\t\tlocation: Location,\n\t\terror: unknown,\n\t\toptions?: { prefix?: string; key?: string },\n\t\t...optionalParameters: unknown[]\n\t): void {\n\t\tif (this.isChannelActive('error')) {\n\t\t\tconst errorLocation = getLocationFromError(error as Error);\n\t\t\tconst prefixes = [`${this._getLocationString(location)} -> ${this._getLocationString(errorLocation)}`];\n\t\t\tif (options?.key) {\n\t\t\t\tprefixes.push(options.key);\n\t\t\t}\n\t\t\tif (options?.prefix) {\n\t\t\t\tprefixes.push(options.prefix.trim());\n\t\t\t}\n\t\t\tthis.log('error', ...prefixes, error, ...optionalParameters);\n\t\t}\n\t}\n\n\t/**\n\t * Logs an informational message.\n\t *\n\t * @param message - The message to log. Can be of any type.\n\t * @param optionalParameters - Additional optional parameters to log.\n\t */\n\tlogInfo(message: unknown, ...optionalParameters: unknown[]): void {\n\t\tthis.log('info', message, ...optionalParameters);\n\t}\n\n\t/**\n\t * Logs a verbose message.\n\t *\n\t * @param message - The primary message to log. Can be of any type.\n\t * @param optionalParameters - Additional optional parameters to log. Can be of any type.\n\t * @returns void\n\t */\n\tlogVerbose(message: unknown, ...optionalParameters: unknown[]): void {\n\t\tthis.log('verbose', message, ...optionalParameters);\n\t}\n\n\t/**\n\t * Logs a warning message.\n\t *\n\t * @param message - The main message to log. Can be of any type.\n\t * @param optionalParameters - Additional optional parameters to log.\n\t */\n\tlogWarning(message: unknown, ...optionalParameters: unknown[]): void {\n\t\tthis.log('warning', message, ...optionalParameters);\n\t}\n\n\t/**\n\t * Constructs a string representation of a given location.\n\t *\n\t * @private\n\t * @param location - The location object containing file, line, and method information.\n\t * @returns A string in the format `file:line:method`.\n\t */\n\tprivate _getLocationString(location: Location): string {\n\t\treturn `${location.file}:${location.line}:${location.method}`;\n\t}\n}\n"]}