{"version":3,"file":"TConnectModalProvider.js","sourceRoot":"","sources":["../../../src/components/TConnectModalProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { ETHERLINK_CHAIN_ID } from '@tconnect.io/core';\nimport { TConnectEvmProvider } from '@tconnect.io/evm-provider';\nimport { TConnectTezosBeaconProvider, Network as TezosBeaconNetwork } from '@tconnect.io/tezos-beacon-provider';\nimport { TConnectTezosWcProvider, Network as TezosWcNetwork } from '@tconnect.io/tezos-wc-provider';\nimport { createContext, memo, ReactNode, useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport {\n\tEVM_PROVIDER_STORAGE_KEY,\n\tEXPERIMENTAL_WALLET,\n\tNETWORKS,\n\tTEZOS_BEACON_PROVIDER_STORAGE_KEY,\n\tTEZOS_WC_PROVIDER_STORAGE_KEY,\n} from '../constants';\nimport { Step, TConnectModal } from '../modals/TConnectModal';\nimport { EvmNetwork, Network, TConnectModalContextValue, TezosNetwork } from '../types';\nimport { nextVersion, useVersionedState } from '../utils';\n\n/**\n * Context for managing the state and actions related to the TConnect modal.\n *\n * @typedef {Object} TConnectModalContextValue\n * @property {Function} openModal - Function to open the modal.\n * @property {Function} closeModal - Function to close the modal.\n * @property {any} evmProvider - Ethereum provider, if available.\n * @property {any} tezosBeaconProvider - Tezos Beacon provider, if available.\n * @property {any} tezosWcProvider - Tezos WalletConnect provider, if available.\n * @property {boolean} connected - Boolean indicating if a connection is established.\n */\nexport const TConnectModalContext = createContext<TConnectModalContextValue>({\n\topenModal: () => undefined,\n\tcloseModal: () => undefined,\n\tevmProvider: undefined,\n\ttezosBeaconProvider: undefined,\n\ttezosWcProvider: undefined,\n\tconnected: false,\n});\n\nexport interface TConnectModalProviderProps {\n\tappName: string;\n\tappUrl: string;\n\tappIcon?: string;\n\tbridgeUrl: string;\n\tapiKey: string;\n\tnetworkFilter?: Array<'etherlink' | 'tezos'>;\n\ttezosBeaconNetwork?: TezosBeaconNetwork;\n\ttezosWcNetwork?: TezosWcNetwork;\n\t// genericWalletUrl?: string;\n\tchildren?: ReactNode | undefined;\n\tonError?: (error: unknown) => void;\n\tcloseModalOnError?: boolean;\n}\n\n/**\n * `TConnectModalProvider` is a React component that provides context and state management for connecting to various blockchain networks and wallets.\n * It handles the connection logic for EVM, Tezos Beacon, and Tezos WalletConnect providers, and manages the state of the connection modal.\n *\n * @param {TConnectModalProviderProps} props - The properties for the `TConnectModalProvider` component.\n * @param {string} props.bridgeUrl - The URL of the bridge server.\n * @param {string} props.apiKey - The API key for authentication.\n * @param {string[]} props.networkFilter - An array of network filters.\n * @param {string} props.genericWalletUrl - The URL for the generic wallet.\n * @param {React.ReactNode} props.children - The child components to be rendered within the provider.\n * @param {(error: unknown) => void} [props.onError] - Optional callback function to handle errors.\n *\n * @returns {JSX.Element} The `TConnectModalProvider` component.\n *\n * @example\n * ```tsx\n * <TConnectModalProvider\n *   bridgeUrl=\"https://bridge.example.com\"\n *   apiKey=\"your-api-key\"\n *   networkFilter={['mainnet', 'testnet']}\n *   onError={(error) => console.error(error)}\n * >\n *   <YourAppComponents />\n * </TConnectModalProvider>\n * ```\n */\nexport const TConnectModalProvider = memo<TConnectModalProviderProps>(\n\t({\n\t\tappName,\n\t\tappUrl,\n\t\tappIcon,\n\t\tbridgeUrl,\n\t\tapiKey,\n\t\tnetworkFilter,\n\t\ttezosBeaconNetwork,\n\t\ttezosWcNetwork,\n\t\t// genericWalletUrl,\n\t\tchildren,\n\t\tonError,\n\t\tcloseModalOnError,\n\t\t...props\n\t}) => {\n\t\tconst [showModal, setShowModal] = useState(false);\n\t\tconst [step, setStep] = useState<Step>('connect');\n\t\tconst [currentNetwork, setCurrentNetwork] = useState<Network | undefined>(undefined);\n\t\tconst [currentWallet, setCurrentWallet] = useState<Network['wallets'][0] | undefined>(undefined);\n\t\tconst [evmProvider, setEvmProvider] = useVersionedState<TConnectEvmProvider | undefined>(undefined);\n\t\tconst [tezosBeaconProvider, setTezosBeaconProvider] = useVersionedState<TConnectTezosBeaconProvider | undefined>(\n\t\t\tundefined,\n\t\t);\n\t\tconst [tezosWcProvider, setTezosWcProvider] = useVersionedState<TConnectTezosWcProvider | undefined>(undefined);\n\t\tconst [connected, setConnected] = useVersionedState(false);\n\n\t\tconst handleError = useCallback(\n\t\t\t(error: unknown) => {\n\t\t\t\tif (closeModalOnError) {\n\t\t\t\t\tsetShowModal(false);\n\t\t\t\t}\n\t\t\t\tif (onError) {\n\t\t\t\t\tsetShowModal(false);\n\t\t\t\t\tonError(error);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[onError, closeModalOnError],\n\t\t);\n\n\t\tuseEffect(() => {\n\t\t\t(async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tconst item = sessionStorage.getItem(EVM_PROVIDER_STORAGE_KEY);\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\tconst version = nextVersion();\n\t\t\t\t\t\tconst provider = await TConnectEvmProvider.deserialize(item);\n\t\t\t\t\t\tsetEvmProvider(version, provider);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\t\t\t})();\n\t\t}, [setEvmProvider]);\n\n\t\tuseEffect(() => {\n\t\t\ttry {\n\t\t\t\tif (evmProvider) {\n\t\t\t\t\tsessionStorage.setItem(EVM_PROVIDER_STORAGE_KEY, evmProvider.serialize());\n\t\t\t\t} else {\n\t\t\t\t\tsessionStorage.removeItem(EVM_PROVIDER_STORAGE_KEY);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t}, [evmProvider, handleError]);\n\n\t\tuseEffect(() => {\n\t\t\t(async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tconst item = sessionStorage.getItem(TEZOS_BEACON_PROVIDER_STORAGE_KEY);\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\tconst version = nextVersion();\n\t\t\t\t\t\tconst provider = await TConnectTezosBeaconProvider.deserialize(item);\n\t\t\t\t\t\tsetTezosBeaconProvider(version, provider);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\t\t\t})();\n\t\t}, [setTezosBeaconProvider]);\n\n\t\tuseEffect(() => {\n\t\t\ttry {\n\t\t\t\tif (tezosBeaconProvider) {\n\t\t\t\t\tsessionStorage.setItem(TEZOS_BEACON_PROVIDER_STORAGE_KEY, tezosBeaconProvider.serialize());\n\t\t\t\t} else {\n\t\t\t\t\tsessionStorage.removeItem(TEZOS_BEACON_PROVIDER_STORAGE_KEY);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t}, [tezosBeaconProvider, handleError]);\n\n\t\tuseEffect(() => {\n\t\t\t(async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tconst item = sessionStorage.getItem(TEZOS_WC_PROVIDER_STORAGE_KEY);\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\tconst version = nextVersion();\n\t\t\t\t\t\tconst provider = await TConnectTezosWcProvider.deserialize(item);\n\t\t\t\t\t\tsetTezosWcProvider(version, provider);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\t\t\t})();\n\t\t}, [setTezosWcProvider]);\n\n\t\tuseEffect(() => {\n\t\t\ttry {\n\t\t\t\tif (tezosWcProvider) {\n\t\t\t\t\tsessionStorage.setItem(TEZOS_WC_PROVIDER_STORAGE_KEY, tezosWcProvider.serialize());\n\t\t\t\t} else {\n\t\t\t\t\tsessionStorage.removeItem(TEZOS_WC_PROVIDER_STORAGE_KEY);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t}, [tezosWcProvider, handleError]);\n\n\t\tconst openModal = useCallback(() => {\n\t\t\ttry {\n\t\t\t\tif (evmProvider) {\n\t\t\t\t\tconst network = NETWORKS.find((network) => network.type === 'evm');\n\t\t\t\t\tif (network) {\n\t\t\t\t\t\tconst wallet = (network as EvmNetwork).wallets.find((wallet) => wallet.walletApp === evmProvider.walletApp);\n\t\t\t\t\t\tif (wallet) {\n\t\t\t\t\t\t\tsetStep('connected');\n\t\t\t\t\t\t\tsetCurrentNetwork(network);\n\t\t\t\t\t\t\tsetCurrentWallet(wallet);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (tezosBeaconProvider) {\n\t\t\t\t\tconst network = NETWORKS.find((network) => network.type === 'tezos');\n\t\t\t\t\tif (network) {\n\t\t\t\t\t\tconst wallet =\n\t\t\t\t\t\t\ttezosBeaconProvider.walletApp === '_generic_'\n\t\t\t\t\t\t\t\t? EXPERIMENTAL_WALLET\n\t\t\t\t\t\t\t\t: (network as TezosNetwork).wallets.find(\n\t\t\t\t\t\t\t\t\t\t(wallet) => wallet.bridge === 'beacon' && wallet.walletApp === tezosBeaconProvider.walletApp,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\tif (wallet) {\n\t\t\t\t\t\t\tsetStep('connected');\n\t\t\t\t\t\t\tsetCurrentNetwork(network);\n\t\t\t\t\t\t\tsetCurrentWallet(wallet);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (tezosWcProvider) {\n\t\t\t\t\tconst network = NETWORKS.find((network) => network.type === 'tezos');\n\t\t\t\t\tif (network) {\n\t\t\t\t\t\tconst wallet = (network as TezosNetwork).wallets.find(\n\t\t\t\t\t\t\t(wallet) => wallet.bridge === 'wc' && wallet.walletApp === tezosWcProvider.walletApp,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (wallet) {\n\t\t\t\t\t\t\tsetStep('connected');\n\t\t\t\t\t\t\tsetCurrentNetwork(network);\n\t\t\t\t\t\t\tsetCurrentWallet(wallet);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsetStep('connect');\n\t\t\t\t\tsetCurrentNetwork(undefined);\n\t\t\t\t\tsetCurrentWallet(undefined);\n\t\t\t\t}\n\t\t\t\tsetShowModal(true);\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t}, [evmProvider, tezosBeaconProvider, tezosWcProvider, handleError]);\n\n\t\tconst closeModal = useCallback(async () => {\n\t\t\ttry {\n\t\t\t\tsetStep((prevStep) => (prevStep === 'invalidChainId' ? 'connected' : prevStep));\n\t\t\t\tsetShowModal(false);\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t}, [handleError]);\n\n\t\tconst handleEvmProvider = useCallback(\n\t\t\tasync (provider: TConnectEvmProvider, chainId: bigint) => {\n\t\t\t\ttry {\n\t\t\t\t\tif (evmProvider) {\n\t\t\t\t\t\tawait evmProvider.disconnect();\n\t\t\t\t\t}\n\n\t\t\t\t\tprovider.on('disconnect', () => {\n\t\t\t\t\t\tsetEvmProvider(nextVersion(), (prevProvider) => (prevProvider === provider ? undefined : prevProvider));\n\t\t\t\t\t});\n\n\t\t\t\t\tsetEvmProvider(nextVersion(), provider);\n\t\t\t\t\tif (chainId === ETHERLINK_CHAIN_ID) {\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\thandleError(error);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[evmProvider, setEvmProvider, closeModal, handleError],\n\t\t);\n\n\t\tconst handleTezosBeaconProvider = useCallback(\n\t\t\tasync (provider: TConnectTezosBeaconProvider) => {\n\t\t\t\ttry {\n\t\t\t\t\tif (tezosBeaconProvider) {\n\t\t\t\t\t\tawait tezosBeaconProvider.disconnect();\n\t\t\t\t\t}\n\n\t\t\t\t\tprovider.on('disconnect', (): void => {\n\t\t\t\t\t\tsetTezosBeaconProvider(nextVersion(), (prevProvider) =>\n\t\t\t\t\t\t\tprevProvider === provider ? undefined : prevProvider,\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\t\tsetTezosBeaconProvider(nextVersion(), provider);\n\t\t\t\t\tcloseModal();\n\t\t\t\t} catch (error) {\n\t\t\t\t\thandleError(error);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[tezosBeaconProvider, setTezosBeaconProvider, closeModal, handleError],\n\t\t);\n\n\t\tconst handleTezosWcProvider = useCallback(\n\t\t\tasync (provider: TConnectTezosWcProvider) => {\n\t\t\t\ttry {\n\t\t\t\t\tif (tezosWcProvider) {\n\t\t\t\t\t\tawait tezosWcProvider.disconnect();\n\t\t\t\t\t}\n\n\t\t\t\t\tprovider.on('disconnect', (): void => {\n\t\t\t\t\t\tsetTezosWcProvider(nextVersion(), (prevProvider) => (prevProvider === provider ? undefined : prevProvider));\n\t\t\t\t\t});\n\n\t\t\t\t\tsetTezosWcProvider(nextVersion(), provider);\n\t\t\t\t\tcloseModal();\n\t\t\t\t} catch (error) {\n\t\t\t\t\thandleError(error);\n\t\t\t\t}\n\t\t\t},\n\t\t\t[tezosWcProvider, setTezosWcProvider, closeModal, handleError],\n\t\t);\n\n\t\tuseEffect(() => {\n\t\t\t(async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tconst version = nextVersion();\n\t\t\t\t\tconst tmpConnected =\n\t\t\t\t\t\t((step !== 'invalidChainId' && (await evmProvider?.connected())) || tezosBeaconProvider?.connected()) ??\n\t\t\t\t\t\tfalse;\n\t\t\t\t\tsetConnected(version, tmpConnected);\n\t\t\t\t} catch (error) {\n\t\t\t\t\thandleError(error);\n\t\t\t\t}\n\t\t\t})();\n\t\t}, [step, evmProvider, tezosBeaconProvider, setConnected, handleError]);\n\n\t\tconst handleDisconnect = useCallback(async () => {\n\t\t\ttry {\n\t\t\t\tawait Promise.all([\n\t\t\t\t\tevmProvider?.disconnect(),\n\t\t\t\t\ttezosBeaconProvider?.disconnect(),\n\t\t\t\t\ttezosWcProvider?.disconnect(),\n\t\t\t\t]);\n\t\t\t\tsetEvmProvider(nextVersion(), undefined);\n\t\t\t\tsetTezosBeaconProvider(nextVersion(), undefined);\n\t\t\t\tsetTezosWcProvider(nextVersion(), undefined);\n\t\t\t\tcloseModal();\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t}, [\n\t\t\tevmProvider,\n\t\t\ttezosBeaconProvider,\n\t\t\ttezosWcProvider,\n\t\t\tsetEvmProvider,\n\t\t\tsetTezosBeaconProvider,\n\t\t\tsetTezosWcProvider,\n\t\t\tcloseModal,\n\t\t\thandleError,\n\t\t]);\n\n\t\tconst value = useMemo(\n\t\t\t() => ({\n\t\t\t\topenModal,\n\t\t\t\tcloseModal,\n\t\t\t\tevmProvider: step === 'invalidChainId' ? undefined : evmProvider,\n\t\t\t\ttezosBeaconProvider,\n\t\t\t\ttezosWcProvider,\n\t\t\t\tconnected,\n\t\t\t}),\n\t\t\t[openModal, closeModal, step, evmProvider, tezosBeaconProvider, tezosWcProvider, connected],\n\t\t);\n\n\t\treturn (\n\t\t\t<TConnectModalContext.Provider value={value} {...props}>\n\t\t\t\t{children}\n\t\t\t\t{showModal && (\n\t\t\t\t\t<TConnectModal\n\t\t\t\t\t\tappName={appName}\n\t\t\t\t\t\tappUrl={appUrl}\n\t\t\t\t\t\tappIcon={appIcon}\n\t\t\t\t\t\tbridgeUrl={bridgeUrl}\n\t\t\t\t\t\tapiKey={apiKey}\n\t\t\t\t\t\tnetworkFilter={networkFilter}\n\t\t\t\t\t\ttezosBeaconNetwork={tezosBeaconNetwork}\n\t\t\t\t\t\ttezosWcNetwork={tezosWcNetwork}\n\t\t\t\t\t\t// genericWalletUrl={genericWalletUrl}\n\t\t\t\t\t\tstep={step}\n\t\t\t\t\t\tonChangeStep={setStep}\n\t\t\t\t\t\tcurrentNetwork={currentNetwork}\n\t\t\t\t\t\tonChangeCurrentNetwork={setCurrentNetwork}\n\t\t\t\t\t\tcurrentWallet={currentWallet}\n\t\t\t\t\t\tonChangeCurrentWallet={setCurrentWallet}\n\t\t\t\t\t\tevmProvider={evmProvider}\n\t\t\t\t\t\tonChangeEvmProvider={handleEvmProvider}\n\t\t\t\t\t\ttezosBeaconProvider={tezosBeaconProvider}\n\t\t\t\t\t\tonChangeTezosBeaconProvider={handleTezosBeaconProvider}\n\t\t\t\t\t\ttezosWcProvider={tezosWcProvider}\n\t\t\t\t\t\tonChangeTezosWcProvider={handleTezosWcProvider}\n\t\t\t\t\t\tonDisconnect={handleDisconnect}\n\t\t\t\t\t\tonClose={closeModal}\n\t\t\t\t\t\tonError={handleError}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</TConnectModalContext.Provider>\n\t\t);\n\t},\n);\n\nTConnectModalProvider.displayName = 'TConnectModalProvider';\n\nexport const useTConnectModal = (): TConnectModalContextValue => useContext(TConnectModalContext);\n"]}